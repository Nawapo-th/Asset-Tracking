# р╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕лр╕Щр╣Йр╕▓р╣Бр╕кр╕Фр╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤ (History Timeline)

## р╕кр╕гр╕╕р╕Ыр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З

р╣Др╕Фр╣Йр╕Чр╕│р╕Бр╕▓р╕гр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕гр╕░р╕Ър╕Ър╣Бр╕кр╕Фр╕Зр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щр╕Вр╕нр╕Зр╕Др╕гр╕╕р╕ар╕▒р╕Ур╕Ср╣Мр╣Гр╕лр╣Йр╕бр╕╡р╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕бр╕▓р╕Бр╕Вр╕╢р╣Йр╕Щ р╣Вр╕Фр╕вр╣Бр╕кр╕Фр╕З:
- **р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Бр╕Хр╣Ир╕ер╕░р╕Яр╕┤р╕ер╕Фр╣М** р╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф (р╕Ир╕▓р╕Бр╕нр╕░р╣Др╕гр╣Ар╕Ыр╣Зр╕Щр╕нр╕░р╣Др╕г)
- **р╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Бр╕Бр╣Йр╣Др╕В** р╣Гр╕Щр╕Чр╕╕р╕Бр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
- **р╣Др╕нр╕Др╕нр╕Щр╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б** р╕Бр╕▒р╕Ър╣Бр╕Хр╣Ир╕ер╕░р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Вр╕нр╕Зр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
- **р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕Чр╕╡р╣Ир╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕в** р╣Бр╕вр╕Бр╣Бр╕Хр╣Ир╕ер╕░р╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Ар╕Ыр╣Зр╕Щр╕Ър╕гр╕гр╕Чр╕▒р╕Ф

## р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Гр╕Щр╣Др╕Яр╕ер╣М

### 1. Backend (server.js)

#### 1.1 р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Бр╕▓р╕гр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕гр╕╕р╕ар╕▒р╕Ур╕Ср╣Мр╣Гр╕лр╕бр╣И
```javascript
// р╣Ар╕Фр╕┤р╕б
await logAction(user, "ADD", obj.assetID, `р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕гр╕╕р╕ар╕▒р╕Ур╕Ср╣Мр╣Гр╕лр╕бр╣И: ${obj.deviceName}`);

// р╣Гр╕лр╕бр╣И
await logAction(user, "ADD", obj.assetID, `р╣Ар╕Юр╕┤р╣Ир╕бр╕Др╕гр╕╕р╕ар╕▒р╕Ур╕Ср╣Мр╣Гр╕лр╕бр╣И: ${obj.deviceName} | р╕лр╕Щр╣Ир╕зр╕вр╕Зр╕▓р╕Щ: ${obj.department} | р╕Кр╕▒р╣Йр╕Щ: ${obj.floor || '-'}`);
```

#### 1.2 р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Бр╕▓р╕гр╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕е
```javascript
// р╣Ар╕Фр╕┤р╕б - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Ар╕Йр╕Юр╕▓р╕░р╕Кр╕╖р╣Ир╕нр╣Бр╕ер╕░р╕кр╕Цр╕▓р╕Щр╕░
let changes = [];
if (oldRow.DeviceName !== obj.deviceName) changes.push(`р╕Кр╕╖р╣Ир╕н: ${oldRow.DeviceName} -> ${obj.deviceName}`);
if (oldRow.Status !== obj.status) changes.push(`р╕кр╕Цр╕▓р╕Щр╕░: ${oldRow.Status} -> ${obj.status}`);

// р╣Гр╕лр╕бр╣И - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Чр╕╕р╕Бр╕Яр╕┤р╕ер╕Фр╣Мр╕Чр╕╡р╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
let changes = [];
if (oldRow.DeviceName !== obj.deviceName) changes.push(`р╕Кр╕╖р╣Ир╕н: ${oldRow.DeviceName} тЖТ ${obj.deviceName}`);
if (oldRow.Model !== obj.model) changes.push(`р╕гр╕╕р╣Ир╕Щ: ${oldRow.Model || '-'} тЖТ ${obj.model || '-'}`);
if (oldRow.Brand !== obj.brand) changes.push(`р╕вр╕╡р╣Ир╕лр╣Йр╕н: ${oldRow.Brand || '-'} тЖТ ${obj.brand || '-'}`);
if (oldRow.Division !== obj.location) changes.push(`р╕кр╕▒р╕Зр╕Бр╕▒р╕Ф: ${oldRow.Division || '-'} тЖТ ${obj.location || '-'}`);
if (oldRow.Department !== obj.department) changes.push(`р╕лр╕Щр╣Ир╕зр╕вр╕Зр╕▓р╕Щ: ${oldRow.Department || '-'} тЖТ ${obj.department || '-'}`);
if (oldRow.Floor !== obj.floor) changes.push(`р╕Кр╕▒р╣Йр╕Щ: ${oldRow.Floor || '-'} тЖТ ${obj.floor || '-'}`);
if (oldRow.User !== obj.user) changes.push(`р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ: ${oldRow.User || '-'} тЖТ ${obj.user || '-'}`);
if (oldRow.Status !== obj.status) changes.push(`р╕кр╕Цр╕▓р╕Щр╕░: ${oldRow.Status} тЖТ ${obj.status}`);
if (oldRow.Remark !== obj.remark) changes.push(`р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕: р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З`);
```

#### 1.3 р╣Ар╕Юр╕┤р╣Ир╕бр╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Бр╕Бр╣Йр╣Др╕Вр╣Гр╕Щр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤
```javascript
// р╣Ар╕Фр╕┤р╕б
await logAction(user, "EDIT", obj.assetID, changes.join(", "));

// р╣Гр╕лр╕бр╣И
await logAction(user, "EDIT", obj.assetID, `р╣Бр╕Бр╣Йр╣Др╕Вр╣Вр╕Фр╕в: ${fullName || user} | ${changes.join(", ")}`);
```

### 2. Frontend (app.js)

#### 2.1 р╣Ар╕Юр╕┤р╣Ир╕бр╣Др╕нр╕Др╕нр╕Щр╕Хр╕▓р╕бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Вр╕нр╕Зр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ
```javascript
// р╕Бр╕│р╕лр╕Щр╕Фр╣Др╕нр╕Др╕нр╕Щр╣Бр╕ер╕░р╕кр╕╡р╕Хр╕▓р╕бр╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Вр╕нр╕З action
let iconBg = 'bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400';
let icon = 'тЪЩя╕П';

if (item.type === 'audit') {
    iconBg = 'bg-emerald-100 dark:bg-emerald-900/50 text-emerald-600 dark:text-emerald-400';
    icon = 'ЁЯУЛ';
} else if (item.action === 'ADD') {
    iconBg = 'bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400';
    icon = 'тЮХ';
} else if (item.action === 'EDIT') {
    iconBg = 'bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400';
    icon = 'тЬПя╕П';
} else if (item.action === 'DELETE') {
    iconBg = 'bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400';
    icon = 'ЁЯЧСя╕П';
} else if (item.action === 'ARCHIVE') {
    iconBg = 'bg-purple-100 dark:bg-purple-900/50 text-purple-600 dark:text-purple-400';
    icon = 'ЁЯУж';
}
```

#### 2.2 р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕В
- р╣Бр╕вр╕Бр╣Бр╕кр╕Фр╕Зр╕Кр╕╖р╣Ир╕нр╕Ьр╕╣р╣Йр╣Бр╕Бр╣Йр╣Др╕В
- р╣Бр╕вр╕Бр╕гр╕▓р╕вр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╣Ар╕Ыр╣Зр╕Щр╕Ър╕гр╕гр╕Чр╕▒р╕Ф
- р╣Ар╕Юр╕┤р╣Ир╕бр╣Др╕нр╕Др╕нр╕Щр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕ер╕░р╕Ыр╕гр╕░р╣Ар╕ар╕Чр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З:
  - ЁЯПв р╕лр╕Щр╣Ир╕зр╕вр╕Зр╕▓р╕Щ
  - ЁЯПЧя╕П р╕Кр╕▒р╣Йр╕Щ
  - ЁЯУК р╕кр╕Цр╕▓р╕Щр╕░
  - ЁЯУЭ р╕Кр╕╖р╣Ир╕н
  - ЁЯФз р╕гр╕╕р╣Ир╕Щ
  - ЁЯП╖я╕П р╕вр╕╡р╣Ир╕лр╣Йр╕н
  - ЁЯПЫя╕П р╕кр╕▒р╕Зр╕Бр╕▒р╕Ф
  - ЁЯСд р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

#### 2.3 р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Бр╕▓р╕гр╣Ар╕Юр╕┤р╣Ир╕бр╣Гр╕лр╕бр╣И
- р╣Бр╕кр╕Фр╕Зр╕Кр╕╖р╣Ир╕нр╕Др╕гр╕╕р╕ар╕▒р╕Ур╕Ср╣Мр╣Бр╕Ър╕Ър╣Ар╕Фр╣Ир╕Щ
- р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б (р╕лр╕Щр╣Ир╕зр╕вр╕Зр╕▓р╕Щ, р╕Кр╕▒р╣Йр╕Щ) р╣Бр╕Ър╕Ър╣Бр╕вр╕Бр╕Ър╕гр╕гр╕Чр╕▒р╕Ф

## р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕е

### р╕Бр╣Ир╕нр╕Щр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З
```
EDIT
тЪЩя╕П р╕Кр╕╖р╣Ир╕н: р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М -> р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣Мр╕Хр╕▒р╣Йр╕Зр╣Вр╕Хр╣Кр╕░, р╕кр╕Цр╕▓р╕Щр╕░: р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ -> р╕кр╣Ир╕Зр╕Др╕╖р╕Щ
ЁЯСд admin
```

### р╕лр╕ер╕▒р╕Зр╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З
```
EDIT
тЬПя╕П р╣Бр╕Бр╣Йр╣Др╕Вр╣Вр╕Фр╕в: р╕Щр╕▓р╕вр╕кр╕бр╕Кр╕▓р╕в р╣Гр╕Ир╕Фр╕╡
   ЁЯПв р╕лр╕Щр╣Ир╕зр╕вр╕Зр╕▓р╕Щ: р╕Зр╕▓р╕Щр╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡р╕кр╕▓р╕гр╕кр╕Щр╣Ар╕Чр╕и тЖТ р╕Зр╕▓р╕Щр╕Ър╕гр╕┤р╕лр╕▓р╕гр╕Чр╕▒р╣Ир╕зр╣Др╕Ы
   ЁЯПЧя╕П р╕Кр╕▒р╣Йр╕Щ: F2 тЖТ F3
   ЁЯУК р╕кр╕Цр╕▓р╕Щр╕░: р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ тЖТ р╕кр╣Ир╕Зр╕Др╕╖р╕Щ
   ЁЯУЭ р╕Кр╕╖р╣Ир╕н: р╣Ар╕Др╕гр╕╖р╣Ир╕нр╕Зр╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣М тЖТ р╕Др╕нр╕бр╕Юр╕┤р╕зр╣Ар╕Хр╕нр╕гр╣Мр╕Хр╕▒р╣Йр╕Зр╣Вр╕Хр╣Кр╕░
ЁЯСд admin
```

## р╕Ыр╕гр╕░р╣Вр╕вр╕Кр╕Щр╣Мр╕Чр╕╡р╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ъ

1. **р╕Др╕зр╕▓р╕бр╕Кр╕▒р╕Фр╣Ар╕Ир╕Щ**: р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Ар╕лр╣Зр╕Щр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕╕р╕Бр╕Яр╕┤р╕ер╕Фр╣М
2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Фр╣Й**: р╕гр╕╣р╣Йр╕зр╣Ир╕▓р╣Гр╕Др╕гр╣Ар╕Ыр╣Зр╕Щр╕Др╕Щр╣Бр╕Бр╣Йр╣Др╕В
3. **р╕нр╣Ир╕▓р╕Щр╕Зр╣Ир╕▓р╕в**: р╣Др╕нр╕Др╕нр╕Щр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕Кр╣Ир╕зр╕вр╣Гр╕лр╣Йр╣Ар╕Вр╣Йр╕▓р╣Гр╕Ир╕Зр╣Ир╕▓р╕вр╕Вр╕╢р╣Йр╕Щ
4. **р╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щ**: р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Чр╕╕р╕Бр╕Яр╕┤р╕ер╕Фр╣Мр╕Чр╕╡р╣Ир╕кр╕│р╕Др╕▒р╕Н

## р╕зр╕┤р╕Шр╕╡р╕Чр╕Фр╕кр╕нр╕Ъ

1. р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ър╕Фр╣Йр╕зр╕вр╕Ър╕▒р╕Нр╕Кр╕╡ Admin
2. р╣Ар╕ер╕╖р╕нр╕Бр╕Др╕гр╕╕р╕ар╕▒р╕Ур╕Ср╣Мр╣Гр╕Фр╕Бр╣Зр╣Др╕Фр╣Й
3. р╕Др╕ер╕┤р╕Бр╕Ыр╕╕р╣Ир╕б "р╕Фр╕╣" (ЁЯСБя╕П)
4. р╕Др╕ер╕┤р╕Бр╣Бр╕Чр╣Зр╕Ъ "р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤"
5. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╣Бр╕кр╕Фр╕Зр╕гр╕▓р╕вр╕ер╕░р╣Ар╕нр╕╡р╕вр╕Фр╕Др╕гр╕Ър╕Цр╣Йр╕зр╕Щр╕лр╕гр╕╖р╕нр╣Др╕бр╣И

## р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕

- р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕Зр╕Щр╕╡р╣Йр╕Ир╕░р╕бр╕╡р╕Ьр╕ер╕Бр╕▒р╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕╡р╣Ир╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕лр╕бр╣Ир╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
- р╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╣Ар╕Бр╣Ир╕▓р╕Чр╕╡р╣Ир╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Др╕зр╣Йр╣Бр╕ер╣Йр╕зр╕Ир╕░р╕вр╕▒р╕Зр╕Др╕Зр╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╣Ар╕Фр╕┤р╕б
- р╕лр╕▓р╕Бр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╣Гр╕лр╣Йр╕Ыр╕гр╕░р╕зр╕▒р╕Хр╕┤р╣Ар╕Бр╣Ир╕▓р╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╣Гр╕лр╕бр╣И р╕Хр╣Йр╕нр╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣Ир╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
